<!-- Old Action Code Starts -------------------------------------------------------------

 <div id="wrapper" class="relative">
    <div id="leftcard">
        <div class="mx-auto py-4 border-b flex z-index[99] noselect place-items-center">
            <div class="text-indigo-500 mr-6 w-8 h-8 rounded-full cursor-pointer bg-neutral-200 flex items-center justify-center"
                routerLink="../">
                <vezo-icon icon="arrowLeft" className="w-4 h-4"></vezo-icon>
            </div>
            <div class="heading">ACTIONS</div>
            <div class="flex-grow"></div>
            <div class="mr-4"><img src="assets/macharc_icon.svg" class="w-6" /></div>
        </div>
        <div id="blocklist">
            <div *ngFor="let action of actions" class="blockelem create-flowy noselect">
                <input type="hidden" name='blockelemtype' class="blockelemtype" [value]="action.type">
                <div class="grabme">
                    <img src="assets/grabme.svg">
                </div>
                <div class="blockin">
                    <div class="blockico">
                        <span></span>
                        <img [src]="action.icon">
                    </div>
                    <div class="blocktext">
                        <p class="blocktitle">{{ action.title }}</p>
                        <p class="blockdesc">{{ action.description }}</p>
                    </div>
                </div>
            </div>
        </div>
        <button (click)="getOutPut()">Output</button>
    </div>
</div>
<div #canvas id="canvas" class="canvas"></div> 

Old Action Code ends here............................................................... -->

<!-- New code using sqd-designer -->

<div class="flex " style="height: 100%">

  <div class="w-2/12  border-r h-auto">
    <div style="width:auto; height: 55px; background-color: #FFFFFF;"
      class=" flex justify-center items-center border-b border-l">
      <div class="ml-3 mb-1" [routerLink]="'/applications'"> 
        <vezo-icon icon="arrowUturnLeft" className="w-4 h-4" style="color: #2e2e2e"></vezo-icon>
      </div>
      <div class="flex justify-center items-center gap-2 cursor-pointer w-full" (click)="addData()">
        <img src="assets/icons8_plus.png" style="width: 18px ;">
        <div style="font-size: 14px; font-weight: 400; color: #6D6D6D;">Add Action</div>
      </div>
    </div>

    <!-- All Actions Visible Here -->
    <div *ngIf="true" class="overflow-y-auto">
      <div *ngFor="let action of data ; let i = index">
        <div class="my-1 mx-2 flex justify-start gap-2 p-1 cursor-pointer items-center" 
        (mouseenter)="hoverAction('enter' , action)" (mouseleave)="hoverAction('exit' , action)"
          [ngClass]="{'bg-indigo-50': action.id == this.actionId}">
          <img src="assets/shopping_bag.svg" style="width: 14px; height: 14px;" />
          <div class="flex justify-start w-full" (click)="openCurrentAction(action)">
            <div style="font-size: 12px; font-weight: 400; color: #2e2e2e;" class="my-1">{{action.actionName}}
            </div>
          </div>
          <div *ngIf="this.currentAction.id == action.id" class="flex justify-between items-center gap-4">
            <vezo-icon icon="pencil" className=" w-3 h-3 text-indigo-500 cursor-pointer" (click)="editData(action)"></vezo-icon>
            <vezo-icon icon="trash" className="w-3 h-3 text-red-500 cursor-pointer" (click)="deleteData(action)"></vezo-icon>
          </div>
        </div>
      </div>
      <div *ngIf="this.data.length <= 0 " class="m-2 p-2">
        <div style="font-size: 14px; font-weight: 500; color: #000000">No Action Found</div>
        <div class="mt-1" style="font-size: 12px; font-weight: 500; color: #888888">add one!</div>
      </div>
    </div>
  </div>

  <div class="w-10/12  overflow-y-scroll" style="height: 100%;">
    <div *ngIf="this.actionId">
      <div class="h-screen">
        <!-- <h2 class="text-lg mb-4">{{ wf.workflowName }}</h2> -->
        <sqd-designer theme="light" [undoStackSize]="10" [definition]="definition"
          [toolboxConfiguration]="toolboxConfiguration" [stepsConfiguration]="stepsConfiguration" [controlBar]="true"
          [areEditorsHidden]="false" [globalEditor]="globalEditor" [stepEditor]="stepEditor"
          (onReady)="onDesignerReady($event)" (onDefinitionChanged)="onDefinitionChanged($event)">
        </sqd-designer>
      </div>
      <ng-template #globalEditor let-editor>
        <div class="p-4">
          <h2 class="heading inline-block my-3">Service Config</h2>
          <vezo-button (click)="generateServiceCode()" label="Generate Code"
            className="inline-block float-right"></vezo-button>

          <h3 class="my-4 font-semibold">Collections</h3>
          <input [(ngModel)]="editor.definition.properties.collections"
            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
            (input)="
        updateProperty(
          editor.definition.properties,
          'collections',
          $event,
          editor.context
        )
      " />
          <p class="my-2 text-slate-400">Enter comma separated collection names</p>

          <h3 class="my-4 font-semibold">Return Type</h3>
          <input [(ngModel)]="editor.definition.properties.returnType"
            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
            (input)="
        updateProperty(
          editor.definition.properties,
          'returnType',
          $event,
          editor.context
        )
      " />

          <h3 class="my-4 font-semibold">Declarations</h3>
          <textarea [(ngModel)]="editor.definition.properties.declarations" rows="6"
            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
            (input)="
        updateProperty(
          editor.definition.properties,
          'declarations',
          $event,
          editor.context
        )
      "></textarea>

          <h3 class="my-4 font-semibold">Schedule</h3>
          <input type="number" [value]="editor.definition.properties.velocity"
            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
            (input)="
        updateProperty(
          editor.definition.properties,
          'velocity',
          $event,
          editor.context
        )
      " />
          <p class="my-2 text-slate-400">Enter time delay to execute in seconds</p>
          <vezo-button (click)="saveDefinition()" label="Save" className="my-4 float-right"></vezo-button>
          <vezo-button (click)="reloadDefinitionClicked()" label="Clear"
            className="m-4 bg-slate-50 float-right"></vezo-button>
        </div>
      </ng-template>

      <ng-template #stepEditor let-editor>
        <div class="p-4">
          <h2 class="text-lg">Step Editor</h2>

          <h3 class="my-4 font-semibold">Name</h3>

          <input type="text" [value]="editor.step.name"
            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
            (input)="updateName(editor.step, $event, editor.context)" />

          <h3 class="my-4 font-semibold">Expression</h3>
          <textarea [value]="editor.step.properties.expression" rows="6"
            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
            (input)="
        updateProperty(
          editor.step.properties,
          'expression',
          $event,
          editor.context
        )
      "></textarea>
          <p class="my-2 text-slate-400">
            Enter the expression to be evaluated to proceed to next step.
          </p>
          <a href="" target="_blank" class="text-blue-400">Refer docs on how to write expressions</a>

          <h3 class="my-4 font-semibold">Schedule</h3>
          <input type="number" [value]="editor.step.properties.velocity"
            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
            (input)="
        updateProperty(
          editor.step.properties,
          'velocity',
          $event,
          editor.context
        )
      " />
          <p class="my-2 text-slate-400">Enter time delay to execute in seconds</p>

          <vezo-button (click)="saveDefinition()" label="Save" className="my-4 float-right"></vezo-button>
          <vezo-button (click)="reloadDefinitionClicked()" label="Reload" className="m-4 float-right"></vezo-button>
        </div>
      </ng-template>

      <br />

      <textarea cols="60" rows="18">{{ definitionJSON }}</textarea>
      <br />
      <vezo-button (click)="reloadDefinitionClicked()" label="Reload definition" className="my-4"></vezo-button>
      <br />
    </div>
    <div *ngIf="this.data.length > 0 && this.actionId == null" class="m-2 p-2 flex justify-center items-center"
      style="height: 100vh;">
      <div style="font-size: 14px; font-weight: 500; color: #000000">Please select the action!</div>
    </div>
    <div *ngIf="this.data.length <= 0 " class="m-2 p-2 flex justify-center items-center" style="height: 100vh;">
      <div style="font-size: 14px; font-weight: 500; color: #000000">No Action Found!</div>
    </div>
  </div>

</div>

<!-- Adding new action PopUp Form -->
<vezo-modal [(visible)]="visible" class="modal" >
  <ng-template vTemplate="header">New Action</ng-template>
  <ng-template vTemplate="content">
      <form [formGroup]="form">
        <div>
          <vezo-input label="Action Name" formControlName="actionName"></vezo-input>
          <error-message [controlName]="form.controls['actionName']"></error-message>
        </div>
        <div class="mt-4">
          <vezo-input label="Action type" formControlName="actionType"></vezo-input>
          <error-message [controlName]="form.controls['actionType']"></error-message>
        </div>  
      </form>
  </ng-template>
  <ng-template vTemplate="footer">
      <div class="text-right">
          <vezo-button label="Save" [disabled]="!form.valid" (click)="saveData()"></vezo-button>
      </div>
  </ng-template>
</vezo-modal>

<vezo-toast></vezo-toast>