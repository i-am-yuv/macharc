<div class="p-3">
    <div class="flex place-items-center">
        <div class="title">Theme</div>
    </div>

    <form [formGroup]="form" (ngSubmit)="onSubmit()">
        <div formArrayName="colorModels">
            <div class="grid sm:grid-cols-3 md:grid-cols-6 gap-2">
                <div *ngFor="let item of colorModels.controls; let i = index" [formGroupName]="i">
                    <div class="flex flex-row items-end" *ngIf="!item.get('custom').value">
                        <vezo-colorpicker [label]="item.get('name').value" [inputVal]="item.get('code').value"
                            (colorChange)='handleInputChange($event, item.get("key").value)'></vezo-colorpicker>
                        <vezo-button *ngIf="item.get('custom').value" icon="pencil"
                            className="bg-primary text-white hover:text-gray-700"
                            (click)="editCustomColor(item)"></vezo-button>
                    </div>
                </div>
            </div>

            <div class="flex place-items-center mt-6">
                <div class="title">Custom Colors</div>
                <div class="flex-grow"></div>
                <div class="text-right">
                    <vezo-button label="Add Custom Color" icon="plus" (click)="addThemeItem()"
                        className="bg-primary text-white hover:text-gray-700"></vezo-button>
                </div>
            </div>

            <div class="grid sm:grid-cols-3 md:grid-cols-6 gap-2">
                <div *ngFor="let item of colorModels.controls; let i = index" [formGroupName]="i">
                    <div class="flex flex-row items-end" *ngIf="item.get('custom').value">
                        <vezo-colorpicker [label]="item.get('name').value" [inputVal]="item.get('code').value"
                            (colorChange)='handleInputChange($event, item.get("key").value)'></vezo-colorpicker>
                        <vezo-button icon="pencil" className="bg-primary text-white hover:text-gray-700"
                            (click)="editCustomColor(item)"></vezo-button>
                    </div>
                </div>
            </div>

        </div>
        <div class="flex place-items-center mt-6">
            <div class="title">Font</div>
            <div class="flex-grow"></div> 
        </div>
        <div formArrayName="fontModels">
            <div class="flex flex-col gap-4">
                <div *ngFor="let item of fontModels.controls; let i = index" [formGroupName]="i">
                    <div class="grid grid-cols-4 gap-2 items-center"  *ngIf="!item.get('custom').value">
                        <Label>{{ item.get('name').value }}</Label>
                        <vezo-select label="Font" placeholder="Font" [items]="fonts"
                            formControlName="font"></vezo-select>
                        <vezo-input label="Font Size" placeholder="Font Size" formControlName="size"></vezo-input>
                        <vezo-select label="Weight" placeholder="Weight" [items]="fontWeight" optionValue="value" optionLabel="key"
                            onChange="onFontWeightChange($event)" formControlName="weight"></vezo-select>
                    </div>
                </div> 
            </div>

            <div class="flex place-items-center mt-6">
                <div class="title">Custom Fonts</div>
                <div class="flex-grow"></div>
                <div class="text-right">
                    <vezo-button label="Add Custom Font" icon="plus" (click)="addFontItem()"
                        className="bg-primary text-white hover:text-gray-700"></vezo-button>
                </div>
            </div>

            <div class="flex flex-col gap-4">
                <div *ngFor="let item of fontModels.controls; let i = index" [formGroupName]="i">
                    <div class="grid grid-cols-4 gap-2 items-center" *ngIf="item.get('custom').value">
                        <Label>{{ item.get('name').value }}</Label>
                        <vezo-select label="Font" placeholder="Font" [items]="fonts"
                            formControlName="font"></vezo-select>
                        <vezo-input label="Font Size" placeholder="Font Size" formControlName="size"></vezo-input>
                        <vezo-select label="Weight" placeholder="Weight" [items]="fontWeight" optionValue="value" optionLabel="key"
                            onChange="onFontWeightChange($event)" formControlName="weight"></vezo-select>
                    </div>
                </div> 
            </div>
        </div>
        <vezo-button label="Save" icon="plus" className="bg-primary text-white hover:text-gray-700"></vezo-button>
    </form>

    <!-- <form [formGroup]="form">
        <div class="grid sm:grid-cols-3 md:grid-cols-6 gap-2">
            <div class="p-2" *ngFor="let product of themeList">
                <div class="border-1 surface-border surface-card border-round flex flex-column">
                    <div class="flex flex-row justify-content-between align-items-start gap-2">
                        <vezo-colorpicker [label]='product.name' (colorChange)="handleInputChange($event, product.key)"
                            [inputVal]="product.code"></vezo-colorpicker>
                    </div>
                </div>
            </div>
        </div>
        <div class="flex place-items-center mt-2">
            <div class="flex-grow"></div>
            <div class="text-right">
                <vezo-button label="Add Custom Color" icon="plus" (click)="saveThemeData()"
                    className="bg-primary text-white hover:text-gray-700"></vezo-button>
            </div>
        </div>

        <div class="flex place-items-center mt-2">
            <div class="title">Font</div>
            <div class="flex-grow"></div> 
        </div>

        <div class="grid sm:grid-cols-2 md:grid-cols-2 gap-2">
            <div class="p-2" *ngFor="let font of fontList"> 
                <div class="grid grid-cols-3 gap-2">
                    <vezo-input label={{font.name}} inputVal="{{font.size}}" placeholder="Jyy"></vezo-input>
                    <vezo-select label="Font Weight" optionLabel="weight" optionValue="value" placeholder="Choose Weight"
                    [inputVal]="product.weight" formControlName="product.weight" [items]="fontWeight"></vezo-select>
                </div>
            </div>
        </div>
    </form> -->
</div>


<!-- Adding custom color form -->
<vezo-modal [(visible)]="visible" class="modal">
    <ng-template vTemplate="header">New Color</ng-template>
    <ng-template vTemplate="content">
        <form [formGroup]="customColorForm">
            <div>
                <vezo-input label="Color Name" formControlName="name"></vezo-input>
                <error-message [controlName]="customColorForm.controls['name']"></error-message>
            </div>
            <div class="mt-4">
                <vezo-input label="Color Code" formControlName="code"></vezo-input>
                <!-- <vezo-colorpicker label="Color Code" [inputVal]="customColorForm.get('code').value" placeholder="#FFFFFF" formControlName="code"></vezo-colorpicker> -->
                <error-message [controlName]="customColorForm.controls['code']"></error-message>
            </div>
        </form>
    </ng-template>
    <ng-template vTemplate="footer">
        <div class="text-right">
            <!-- [disabled]="!customColorForm.valid" -->
            <vezo-button label="Save" (click)="savePopupColorForm()"></vezo-button>
        </div>
    </ng-template>
</vezo-modal>

<!-- Adding custom font form -->
<vezo-modal [(visible)]="fontForm" class="modal">
    <ng-template vTemplate="header">New Style</ng-template>
    <ng-template vTemplate="content">
        <form [formGroup]="customFontForm">
            <div>
                <vezo-input label="Name" formControlName="name"></vezo-input>
                <error-message [controlName]="customFontForm.controls['name']"></error-message>
            </div>
            <div class="mt-4">
                <vezo-select label="Font" placeholder="Font" [items]="fonts" formControlName="font"></vezo-select>
                <error-message [controlName]="customFontForm.controls['font']"></error-message>
            </div>
            <div class="mt-4">
                <vezo-input label="Size" formControlName="size"></vezo-input>
                <error-message [controlName]="customFontForm.controls['size']"></error-message>
            </div>
            <div class="mt-4">
                <vezo-select label="Weight" placeholder="Weight" [items]="fontWeight"
                    formControlName="weight"></vezo-select>
                <error-message [controlName]="customFontForm.controls['weight']"></error-message>
            </div>
        </form>
    </ng-template>
    <ng-template vTemplate="footer">
        <div class="text-right">
            <!-- [disabled]="!customColorForm.valid" -->
            <vezo-button label="Save" (click)="savePopupFontForm()"></vezo-button>
        </div>
    </ng-template>
</vezo-modal>

<vezo-toast></vezo-toast>
<ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '3px' }"></ngx-loading>